# 収穫ロボT7 タッチパネルUI要件書

## 1. 概要
収穫ロボT7のタッチパネル操作インターフェースの要件を定義する。

## 2. 画面仕様

### 2.1 基本仕様
画面の縦横比は4:3とし、枠を描く。画面は常時表示部分と切り替え部分で構成される。常時表示部分は画面上部に配置し、切り替え部分はその下に配置する。操作方式はタッチパネルとする。

### 2.2 画面構成
画面上部に常時表示部分としてヘッダーを配置し、その下に切り替え表示部分を配置する。切り替え表示部分はタブ形式で切り替えが可能である。

## 3. 常時表示部分

### 3.1 表示要素
常時表示部分にはタイトル、時刻、バッテリー残量を表示する。タイトルは画面左側に「収穫ロボT7」と表示する。時刻は画面中央に24時間表記でHH:MM形式で表示する。バッテリー残量は画面右側に数値で%表示する。

## 4. 切り替え表示部分

### 4.1 タブ構成
切り替え表示部分はメインタブと設定タブの2つのタブで構成される。メインタブは運転状況の表示と操作を行う。設定タブは各種パラメータの設定を行う。

## 5. メインタブ仕様

### 5.1 表示機能

#### 5.1.1 設定値表示エリア
設定された値を表示する部分では以下の項目を表示する。収穫開始レーンはエリア1から8、通路1から5、西側または東側の畝を組み合わせて表示する。収穫終了レーンは開始レーンとレーン数から自動的に計算して表示する。進行方向は東または西を表示する。レーン数は設定されたレーン数を表示する。目標収穫量はkg単位で表示する。完熟度は%で表示する。これらの値は全て設定画面で設定された値が反映される。

#### 5.1.2 軌跡・位置表示エリア
ロボットの軌跡と現在位置の図としてmap_house_3.pngをベース地図として表示する。この地図には農場の各レーンと畝の位置が示されている。収穫開始位置から終了位置までのロボットの軌跡を色を変えて地図上に表示する。ロボットの現在位置も軌跡とは異なる色で地図上に表示する。

#### 5.1.3 状態表示エリア
ロボットの状態を表示する部分では以下の項目を表示する。ロボットの状態は待機中、充電中、収穫中のいずれかを表示する。現在の収穫量はkg単位で小数点第1位まで表示する。収穫開始からの経過時間はHH:MM:SS形式で表示する。エラー内容はテキスト形式で表示し、複数行の表示に対応する。収穫中以外の状態では経過時間はゼロのままである。

### 5.2 操作機能

#### 5.2.1 収穫制御ボタン
収穫の開始と終了を制御するトグルボタンを配置する。ボタンには現在の状態に応じて「収穫開始」または「収穫終了」と表示する。ボタンが押されると確認ダイアログは表示せず、即座に処理を実行する。収穫開始すると経過時間のカウントがはじまる。終了するとカウントがリセットされる。

## 6. 設定タブ仕様

### 6.1 設定項目

#### 6.1.1 開始レーン設定
開始レーンの選択では、エリアを1から8まで選択可能とする。通路を1から5まで選択可能とする。畝を西側または東側から選択可能とする。デフォルト値はエリア1、通路1、西側とする。

#### 6.1.2 進行方向設定
進行方向は東に進むか西に進むかを選択する。デフォルト値は東とする。

#### 6.1.3 数値設定
レーン数はデフォルト32レーンとし、設定可能範囲は1から50レーンとする。目標収穫量はデフォルト40kgとし、設定可能範囲は1から100kgとする。完熟度はデフォルト90%とし、設定可能範囲は50%から100%とする。

### 6.2 軌跡・位置表示エリア
設定画面にもロボットの収穫開始から終了までのロボットの軌跡と現在位置の図としてmap_house_3.pngを表示する。表示内容はメインタブと同様とし、設定変更時にリアルタイムで反映される。

### 6.3 操作ボタン
設定画面には保存ボタンとクリアボタンを配置する。保存ボタンを押すと設定値が保存され、メインタブの表示に即座に反映される。クリアボタンを押すと全ての設定がデフォルト値に戻る。これらのボタンは確認ダイアログを表示せず、即座に処理を実行する。

## 7. 画面遷移仕様

### 7.1 タブ切り替え
メインタブと設定タブ間の切り替えが可能である。選択中のタブは視覚的に識別できるよう表示する。

### 7.2 データ連携
設定タブで変更された値は保存ボタンを押すことでメインタブに反映される。メインタブではリアルタイムで状態が更新される。具体的には収穫量、経過時間、ロボット位置、バッテリー残量などが定期的に更新される。

## 8. 表示仕様補足

### 8.1 色分け仕様
地図上でロボットの移動軌跡は視認しやすい色で表示する。現在位置は軌跡とは異なる色で強調表示し、容易に識別できるようにする。エラーが発生した場合は該当する表示部分を警告色で表示する。
### 8.2 レスポンシブ対応
4:3の画面比率内で各表示要素が適切に配置されるよう設計する。タッチ操作に適したボタンサイズを確保し、誤操作を防ぐ。

## 9. 技術要件

### 9.1 表示更新
リアルタイムで状態表示を更新する。具体的には現在の収穫量、経過時間、ロボット位置、バッテリー残量などを定期的に更新する。地図上の位置情報も継続的に更新する。

### 9.2 データ保持
設定された値は永続化し、アプリケーションが再起動された場合でも設定値を復元する。

## 10. 制約事項

### 10.1 操作制約
確認ダイアログは使用しない。設定変更時の確認も行わない。マップ上での直接操作は実装しない。

### 10.2 機能制約
多言語対応は実装しない。ログ機能や履歴表示機能は実装しない。

## 11. 今後の拡張性考慮事項
将来的にログ機能の追加が可能となるよう設計時に考慮する。追加のセンサー情報を表示できる領域を確保する。操作履歴機能の追加に対応できる構造とする。